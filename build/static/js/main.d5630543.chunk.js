(this["webpackJsonpsocial-cool"]=this["webpackJsonpsocial-cool"]||[]).push([[0],{187:function(e,t,c){"use strict";c.r(t);var n=c(77),a=c.n(n),r=(c(179),c(16)),s=c(204),i=c(203),o=c(20),j=c(47),u=c(58),l=c(1),b=c.n(l),O=c(155),d=c.n(O)()("EM7J4USRU5","7959866a9bb34ad031c67f7f3f6de88a").initIndex("socialcool"),h=c(11);var p=function(){var e=Object(u.a)(),t=b.a.useState(""),c=Object(r.a)(t,2),n=c[0],a=c[1],l=b.a.useState(null),O=Object(r.a)(l,2),p=O[0],f=O[1];b.a.useEffect((function(){e.onAuthStateChanged((function(e){f(e)}))}));var x=Object(o.f)();return Object(h.jsxs)(s.a,{children:[Object(h.jsx)(s.a.Item,{children:"Social Cool"}),Object(h.jsx)(s.a.Item,{children:Object(h.jsx)(i.a,{value:n,onSearchChange:function(e,t){var c=t.value;a(c),d.search(c).then((function(e){console.log(e.hits)}))}})}),Object(h.jsx)(s.a.Item,{as:j.b,to:"/",children:"Home"}),Object(h.jsx)(s.a.Item,{as:j.b,to:"/new-post",children:"New Post"}),Object(h.jsx)(s.a.Menu,{position:"right",children:p?Object(h.jsx)(s.a.Item,{onClick:function(){Object(u.c)(e).then(x("/"))},children:"Signout"}):Object(h.jsx)(s.a.Item,{as:j.b,to:"/signin",children:"Login/Signup"})})]})},f=c(0),x=c(105),m=c(4),g=c(158),v=Object(g.a)({apiKey:"AIzaSyCxMvi4M0Xai8kuqn3r970KLassk-fTlGw",authDomain:"social-cool-16812.firebaseapp.com",projectId:"social-cool-16812",storageBucket:"social-cool-16812.appspot.com",messagingSenderId:"443839253633",appId:"1:443839253633:web:105b938de5b05af1f15180"}),w=c(26),S=c(200),I=c(201),k=c(160),C=c(159),y=c(210),U=c(205),B=c(59),E=c(206);var L=function(){var e=b.a.useState([]),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(w.i)(v),s=Object(w.e)(a,"topics");return b.a.useEffect((function(){var e=function(){var e=Object(m.a)(Object(f.a)().mark((function e(){var t,c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.h)(s);case 2:t=e.sent,c=t.docs.map((function(e){return e.data()})),n(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(h.jsx)(E.a,{selection:!0,divided:!0,size:"large",children:c.map((function(e){return Object(h.jsx)(E.a.Item,{children:e.name},e.name)}))})};var D=function(){var e=b.a.useState([]),t=Object(r.a)(e,2),c=t[0],n=t[1],a=Object(w.i)(v),s=Object(w.e)(a,"posts");return b.a.useState((function(){var e=function(){var e=Object(m.a)(Object(f.a)().mark((function e(){var t,c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.h)(s);case 2:t=e.sent,c=t.docs.map((function(e){var t=e.id;return Object(x.a)(Object(x.a)({},e.data()),{},{id:t})})),n(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(h.jsx)(S.a,{children:Object(h.jsx)(I.a,{children:Object(h.jsxs)(k.a,{children:[Object(h.jsxs)(C.a,{width:3,children:[Object(h.jsx)(y.a,{children:"\u4e3b\u984c\u5217\u8868"}),Object(h.jsx)(L,{})]}),Object(h.jsx)(C.a,{width:10,children:Object(h.jsx)(U.a.Group,{children:c.map((function(e){return Object(h.jsxs)(U.a,{as:j.b,to:"/post/".concat(e.id),children:[Object(h.jsx)(U.a.Image,{src:e.imageUrl}),Object(h.jsxs)(U.a.Content,{children:[Object(h.jsx)(U.a.Header,{children:e.title}),Object(h.jsxs)(U.a.Meta,{children:[Object(h.jsx)(B.a,{name:"user circle"}),e.topicName,"\u3002\u4f7f\u7528\u8005"]}),Object(h.jsx)(U.a.Description,{children:e.content}),Object(h.jsx)(U.a.Extra,{children:"\u7559\u8a00 0 \u3002 \u6309\u8b9a 0"})]})]},e.id)}))})}),Object(h.jsx)(C.a,{width:3,children:"\u7a7a\u767d"})]})})})},M=c(202),N=c(208),A=Object(u.a)();var R=function(){var e=Object(o.f)(),t=b.a.useState("login"),c=Object(r.a)(t,2),n=c[0],a=c[1],i=b.a.useState("mk@gmail.com"),j=Object(r.a)(i,2),l=j[0],O=j[1],d=b.a.useState("123456"),p=Object(r.a)(d,2),f=p[0],x=p[1],m=b.a.useState(""),g=Object(r.a)(m,2),v=g[0],w=g[1];return Object(h.jsxs)(S.a,{children:[Object(h.jsxs)(s.a,{widths:2,children:[Object(h.jsx)(s.a.Item,{active:"login"===n,onClick:function(){return a("login")},children:"Login"}),Object(h.jsx)(s.a.Item,{active:"signup"===n,onClick:function(){return a("signup")},children:"Sign up"})]}),Object(h.jsxs)(M.a,{onSubmit:function(){Object(u.b)(A,l,f).then((function(t){console.log(t.user.email),e("/")})).catch((function(e){if("auth/wrong-password"===e.code)w("\u5bc6\u78bc\u932f\u8aa4"),console.log(e.code)}))},children:[Object(h.jsx)(M.a.Input,{label:"\u5e33\u865f",placeholder:"\u8acb\u8f38\u5165\u5e33\u865f",value:l,onChange:function(e){O(e.target.value)}}),Object(h.jsx)(M.a.Input,{label:"\u5bc6\u78bc",placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",value:f,onChange:function(e){x(e.target.value)}}),v&&Object(h.jsx)(N.a,{negative:!0,children:v}),Object(h.jsxs)(M.a.Button,{primary:!0,children:["login"===n&&"Login","signup"===n&&"Sign up"]})]})]})},z=c(161),H=c(188),J=c(117);var F=function(){var e=Object(J.b)(v),t=Object(o.f)(),c=b.a.useState([]),n=Object(r.a)(c,2),a=n[0],s=n[1],i=b.a.useState(""),j=Object(r.a)(i,2),l=j[0],O=j[1],d=b.a.useState(""),p=Object(r.a)(d,2),x=p[0],g=p[1],I=b.a.useState(""),k=Object(r.a)(I,2),C=k[0],y=k[1],U=b.a.useState(!1),B=Object(r.a)(U,2),E=B[0],L=B[1],D=Object(w.i)(v),N=Object(w.e)(D,"topics");b.a.useEffect((function(){var e=function(){var e=Object(m.a)(Object(f.a)().mark((function e(){var t,c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.h)(N);case 2:t=e.sent,c=t.docs.map((function(e){return e.data()})),s(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var A=a.map((function(e){return{text:e.name,value:e.name}})),R=b.a.useState(null),F=Object(r.a)(R,2),G=F[0],K=F[1],T=G?URL.createObjectURL(G):"https://react.semantic-ui.com/images/wireframe/image.png";return Object(h.jsx)(S.a,{children:Object(h.jsxs)(M.a,{onSubmit:function(){L(!0);var c=Object(u.a)(),n=function(){var n=Object(m.a)(Object(f.a)().mark((function n(){return Object(f.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(w.b)(Object(w.e)(D,"posts"),{title:l,content:x,topicName:C,createdAt:w.a.now(),author:{displayName:c.currentUser.displayName,uid:c.currentUser.uid,email:c.currentUser.email}}).then((function(c){var n=Object(J.c)(e,"post-images/"+c.id);Object(J.d)(n,G).then((function(){Object(J.a)(n).then((function(e){Object(w.j)(Object(w.f)(D,"posts",c.id),{imageUrl:e})}))})).catch((function(e){console.log(e.message)})),L(!1),t("/")}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()},children:[Object(h.jsx)(z.a,{src:T,floated:"left",size:"small"}),Object(h.jsx)(H.a,{basic:!0,htmlFor:"post-image",as:"label",children:"\u4e0a\u50b3\u5716\u7247"}),Object(h.jsx)(M.a.Input,{type:"file",id:"post-image",style:{display:"none"},onChange:function(e){K(e.target.files[0])}}),Object(h.jsx)(M.a.Input,{placeholder:"\u8acb\u8f38\u5165\u6a19\u984c",onChange:function(e){return O(e.target.value)}}),Object(h.jsx)(M.a.TextArea,{placeholder:"\u5167\u5bb9",onChange:function(e){return g(e.target.value)}}),Object(h.jsx)(M.a.Dropdown,{onChange:function(e,t){var c=t.value;return y(c)},placeholder:"\u4e3b\u984c",selection:!0,options:A}),Object(h.jsx)(M.a.Button,{loading:E,children:"\u9001\u51fa"})]})})},G=c(207),K=c(211);var T=function(){var e,t=Object(o.g)().postId,c=b.a.useState({}),n=Object(r.a)(c,2),a=n[0],s=n[1],i=Object(w.i)(v);b.a.useEffect((function(){var e=function(){var e=Object(m.a)(Object(f.a)().mark((function e(){var c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(w.f)(i,"posts",t),e.next=3,Object(w.g)(c).then((function(e){console.log("ddd"),s(e.data()),console.log(a)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var j=a.collectedBy.includes("uid");return Object(h.jsx)(S.a,{children:Object(h.jsx)(I.a,{children:Object(h.jsxs)(I.a.Row,{children:[Object(h.jsx)(I.a.Column,{width:3,children:Object(h.jsx)(L,{})}),Object(h.jsx)(I.a.Column,{width:10,children:Object(h.jsxs)(G.a,{children:[Object(h.jsx)(z.a,{src:a.imageUrl,wrapped:!0,ui:!1}),Object(h.jsxs)(G.a.Content,{children:[Object(h.jsx)(G.a.Header,{children:a.title}),Object(h.jsx)(G.a.Meta,{children:Object(h.jsxs)("span",{className:"date",children:["Created at ",null===(e=a.createdAt)||void 0===e?void 0:e.toDate().toLocaleDateString()]})}),Object(h.jsx)(G.a.Description,{children:a.content})]}),Object(h.jsxs)(G.a.Content,{extra:!0,children:[Object(h.jsxs)("a",{children:[Object(h.jsx)(B.a,{name:"user"}),"22 Friends"]}),Object(h.jsx)(K.a,{children:Object(h.jsx)(B.a,{name:"bookmark outline link",onClick:function(){var e=function(){var e=Object(m.a)(Object(f.a)().mark((function e(){var c;return Object(f.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=Object(w.f)(i,"posts",t),console.log(j),console.log("to"),!j){e.next=8;break}return e.next=6,Object(w.j)(c,{collectedBy:Object(w.c)("uid")});case 6:e.next=10;break;case 8:return e.next=10,Object(w.j)(c,{collectedBy:Object(w.d)("uid")});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}})})]})]})})]})})})};var q=function(){return Object(h.jsxs)(j.a,{children:[Object(h.jsx)(p,{}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{path:"/",element:Object(h.jsx)(D,{})}),Object(h.jsx)(o.a,{path:"/signin",element:Object(h.jsx)(R,{})}),Object(h.jsx)(o.a,{path:"/new-post",element:Object(h.jsx)(F,{})}),Object(h.jsx)(o.a,{path:"/post/:postId",element:Object(h.jsx)(T,{})})]})]})};a.a.render(Object(h.jsx)(q,{}),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.d5630543.chunk.js.map